<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ReEngage Program - Operation Meraki</title>
    <link rel="icon" href="images/logo/logo.png" type="image/png" />
    <link rel="stylesheet" href="get-involved.css" />
    <style>
      .badge {
        background-color: #003b71;
        color: #fff;
        border-radius: 999px;
        padding: 0.5em 1em;
        white-space: nowrap;
        width: min-content;
        position: relative;
        font-size: 12px;
        left: 216px;
        top: -54px;
      }
    </style>
    <script src="components/m-header.js" type="module"></script>
    <script src="components/m-footer.js" type="module"></script>
    <script src="components/m-button.js" type="module"></script>
  </head>
  <body class ="program-shared">
    <m-header active="programs"></m-header>

    <div class="main-wrapper">
      <!-- Program Details Sidebar -->

      <aside class="program-details-sidebar">
        <section class="hero-image-section">
          <img class="hero-image" src="images/program/re-engage.png">
        </section>
        <div class="program-details-title">Details</div>
        <div class="program-details-item">
          <img class="icon" src="images/program/check.svg" />
          <p class="title">Equipment included</p>
        </div>
        <div class="program-details-item">
          <img class="icon" src="images/program/calendar.svg" />
          <p class="title">Weekly Workshops</p>
        </div>
        <div class="program-details-item">
          <img class="icon" src="images/program/clock.svg" />
          <p class="title">1 hour program</p>
        </div>
        <div class="program-details-item">
          <img class="icon" src="images/program/map-pin.svg" />
          <p class="title">Ohio</p>
        </div>
        <div class="program-details-item">
          <img class="icon" src="images/program/thumb-up.svg" />
          <p class="title">No Experience Needed</p>
        </div>
      </aside>

      <main class="main-content">
        <!-- Breadcrumb Navigation -->

        <a href="programs.html" class="breadcrumb-navigation">
          <div class="icon"></div>
          Back to all programs
        </a>

        <!-- Hero -->

        <section class="hero-section">
          <div class="hero-title">ReEngage</div>
          <div class="hero-description">
            Operation Meraki ReEngage is a career development and entrepreneurship program designed to transition Veterans to new missions and career paths. This free workshop focuses on essential skills such as writing, reading, and computer use. By instilling flexibility, motivation, and a positive work attitude, the program enhances employability. ReEngage is a demanding yet rewarding program that cultivates resilience, shaping Veterans into Pathfinders—leaders equipped with the tools and skills to navigate the workforce and support their families.
          </div>
          <section class="hero-cta-section">
            <m-button class="hero-cta">
              <div style="padding-inline: 48px; display: flex; align-items: center;">
                <img class="icon" src="images/program/share.svg" />
                <div class="padding-bottom: 14px;">Share</div>
              </div>
            </m-button>
            <m-button variant="primary" class="hero-cta hero-cta-primary">
              <div style="padding-inline: 48px;">
                Sign Up
              </div>
            </m-button>
          </section>
        </section>

        <div class="main-content-divider"></div>

        <!-- FAQ -->

        <section class="faq-section">
          <p class="faq-title">Frequently Asked Questions</p>
          <div class="faq-item faq-1">
            <div class="faq-q">
              <div class="text">Can I bring a friend or family member?</div>
              <div class="arrow"></div>
            </div>
            <div class="faq-a faq-a-1 hide">Yes, family members are encouraged to join our programs as part of the healing process.</div>
          </div>
          <div class="faq-item faq-2">
            <div class="faq-q">
              <div class="text">Do I have to pay anything?</div>
              <div class="arrow"></div>
            </div>
            <div class="faq-a faq-a-2 hide">No, all Operation Meraki programs are completely free for veterans and their families.</div>
          </div>
          <div class="faq-item faq-3">
            <div class="faq-q">
              <div class="text">Do I need to bring any supplies?</div>
              <div class="arrow"></div>
            </div>
            <div class="faq-a faq-a-3 hide">No, all necessary equipment and supplies will be provided for the program.</div>
          </div>
          <div class="faq-item faq-4">
            <div class="faq-q">
              <div class="text">What if I have no experience?</div>
              <div class="arrow"></div>
            </div>
            <div class="faq-a faq-a-4 hide">Our programs are designed for all experience levels, from beginners to advanced. No prior experience is necessary.</div>
          </div>
        </section>
      </main>
    </div>

     <!-- Other Programs -->

    <section class="other-programs-section">
      <p class="title">Other Programs</p>
      <div class="programs">
        <div class="card-wrapper">
          <div class="program-card">
            <img class="cover" src="images/program/refocus.png">
            <p class="title">Refocus</p>
            <p class="description">Refocus uses photography and videography to address trauma through storytelling.</p>
            <m-button variant="primary" class="cta" onclick="location.href='refocus.html'">Learn More</m-button>
          </div>
        </div>
        <div class="card-wrapper">
          <div class="program-card">
            <img class="cover" src="images/program/rebuild.png">
            <p class="title">Rebuild</p>
            <p class="description">Peer support groups are a safe space where Veterans can discuss day-to-day problems with other veterans.</p>
            <m-button disabled variant="primary" class="cta"">Learn More</m-button>
            <div class="badge">Coming Soon</div>
          </div>
        </div>
        <div class="card-wrapper">
          <div class="program-card">
            <img class="cover" src="images/program/replant.png">
            <p class="title">Replant</p>
            <p class="description">RePlant is a sustainable farming program with indoor gardens in community spaces. </p>
            <m-button disabled variant="primary" class="cta"">Learn More</m-button>
            <div class="badge">Coming Soon</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <m-footer></m-footer>

    <div class="dialog-overlay hide">
      <div class="sign-up-dialog">
        <div class="sign-up-dialog-header">
          <div class="title sign-up-title">ReEngage Sign Up</div>
          <div class="step-indicator">Page 1 of 2</div>
          <img class="close" src="images/program/close.svg" />
        </div>

        <form class="sign-up-form">
          <div class="sign-up-step-1">
            <legend class="legend">General Infomation</legend>
            <div class="group">
              <div class="item">
                <label class="label">First Name<span class="require-mark">*</span></label>
                <input class="input" name="firstName" />
              </div>
              <div class="item">
                <label class="label">Last Name<span class="require-mark">*</span></label>
                <input class="input" name="lastName" />
              </div>
              <div class="item">
                 <label for="state">State<span class="require-mark">*</span></label>
                <select id="state" name="state" class="input" required>
                  <option value="">-- Select State --</option>
                  <option value="AL">Alabama</option>
                  <option value="AK">Alaska</option>
                  <option value="AZ">Arizona</option>
                  <option value="AR">Arkansas</option>
                  <option value="CA">California</option>
                  <option value="CO">Colorado</option>
                  <option value="CT">Connecticut</option>
                  <option value="DE">Delaware</option>
                  <option value="FL">Florida</option>
                  <option value="GA">Georgia</option>
                  <option value="HI">Hawaii</option>
                  <option value="ID">Idaho</option>
                  <option value="IL">Illinois</option>
                  <option value="IN">Indiana</option>
                  <option value="IA">Iowa</option>
                  <option value="KS">Kansas</option>
                  <option value="KY">Kentucky</option>
                  <option value="LA">Louisiana</option>
                  <option value="ME">Maine</option>
                  <option value="MD">Maryland</option>
                  <option value="MA">Massachusetts</option>
                  <option value="MI">Michigan</option>
                  <option value="MN">Minnesota</option>
                  <option value="MS">Mississippi</option>
                  <option value="MO">Missouri</option>
                  <option value="MT">Montana</option>
                  <option value="NE">Nebraska</option>
                  <option value="NV">Nevada</option>
                  <option value="NH">New Hampshire</option>
                  <option value="NJ">New Jersey</option>
                  <option value="NM">New Mexico</option>
                  <option value="NY">New York</option>
                  <option value="NC">North Carolina</option>
                  <option value="ND">North Dakota</option>
                  <option value="OH">Ohio</option>
                  <option value="OK">Oklahoma</option>
                  <option value="OR">Oregon</option>
                  <option value="PA">Pennsylvania</option>
                  <option value="RI">Rhode Island</option>
                  <option value="SC">South Carolina</option>
                  <option value="SD">South Dakota</option>
                  <option value="TN">Tennessee</option>
                  <option value="TX">Texas</option>
                  <option value="UT">Utah</option>
                  <option value="VT">Vermont</option>
                  <option value="VA">Virginia</option>
                  <option value="WA">Washington</option>
                  <option value="WV">West Virginia</option>
                  <option value="WI">Wisconsin</option>
                  <option value="WY">Wyoming</option>
                </select>
              </div>
              <div class="item">
                <label class="label">Email<span class="require-mark">*</span></label>
                <input class="input" name="email" />
              </div>
              <div class="item">
                <label class="label">Phone Number<span class="require-mark">*</span></label>
                <input class="input" name="phone" />
              </div>
              <div class="item">
                <label class="label">Town<span class="require-mark">*</span></label>
                <input class="input" name="town" />
              </div>
            </div>
            <legend class="legend">How did you hear about us?</legend>
            <div class="group">
              <div class="item">
                <input class="input" name="hearAboutUs" />
              </div>
            </div>
            <legend class="legend">How would you rate your mental health today?</legend>
<div class="radio-group">
  <div class="radio">
    <input type="radio" name="mentalHealthRating" value="1" />
    <div class="label">1</div>
  </div>
  <div class="radio">
    <input type="radio" name="mentalHealthRating" value="2" />
    <div class="label">2</div>
  </div>
  <div class="radio">
    <input type="radio" name="mentalHealthRating" value="3" />
    <div class="label">3</div>
  </div>
  <div class="radio">
    <input type="radio" name="mentalHealthRating" value="4" />
    <div class="label">4</div>
  </div>
  <div class="radio">
    <input type="radio" name="mentalHealthRating" value="5" />
    <div class="label">5</div>
  </div>
  <div class="radio">
    <input type="radio" name="mentalHealthRating" value="6" />
    <div class="label">6</div>
  </div>
  <div class="radio">
    <input type="radio" name="mentalHealthRating" value="7" />
    <div class="label">7</div>
  </div>
  <div class="radio">
    <input type="radio" name="mentalHealthRating" value="8" />
    <div class="label">8</div>
  </div>
  <div class="radio">
    <input type="radio" name="mentalHealthRating" value="9" />
    <div class="label">9</div>
  </div>
  <div class="radio">
    <input type="radio" name="mentalHealthRating" value="10" />
    <div class="label">10</div>
  </div>
</div>

            <div class="radio-group-scale">
              <p>Very bad</p>
              <p>Very Good</p>
            </div>

            <div class="actions">
  <div id="page1-error" style="color: red; font-size: 0.95em; margin-bottom: 8px;"></div>
  <m-button variant="primary" class="primary-action to-2">
    <div style="padding-inline: 48px">Next Page</div>
  </m-button>
</div>
          </div>


          <div class="sign-up-step-2 hide">
  <legend class="legend">What has been the most difficult part of returning?</legend>
  <div class="checkbox-group">
    <label class="checkbox-item">
      <input type="checkbox" value="Feeling misunderstood" />
      <div class="label">Feeling misunderstood</div>
    </label>
    <label class="checkbox-item">
      <input type="checkbox" value="Family life" />
      <div class="label">Family life</div>
    </label>
    <label class="checkbox-item">
      <input type="checkbox" value="Lack of purpose" />
      <div class="label">Lack of purpose</div>
    </label>
    <label class="checkbox-item">
      <input type="checkbox" value="Lack of support" />
      <div class="label">Lack of support</div>
    </label>
    <label class="checkbox-item">
      <input type="checkbox" value="Other" />
      <div class="label">Other</div>
    </label>
    <label class="checkbox-item">
      <input type="checkbox" value="Finding work" />
      <div class="label">Finding work</div>
    </label>
    <label class="checkbox-item">
      <input type="checkbox" value="Trouble finding support" />
      <div class="label">Trouble finding support</div>
    </label>
  </div>

  <legend class="legend">Any comments for Operation Meraki?</legend>
  <textarea class="input" placeholder="(Type here)"></textarea>

  <label class="checkbox-item block">
    <input type="checkbox" />
    <div class="label">
      By checking this box, you give us permission to contact you with the information provided.
    </div>
  </label>

  <div class="actions">
    <m-button class="secondary-action to-1">
      <div style="padding-inline: 48px; position: relative;">
        <img src="images/program/back.svg" />
        Back
      </div>
    </m-button>
    <m-button variant="primary" class="primary-action to-signed-up">
      <div style="padding-inline: 48px;">Submit</div>
    </m-button>
  </div>
</div>
        </form>

        <div class="signed-up hide">
          <img class="hero" src="images/program/high-five.svg" />
          <p class="title">You’re all signed up.</p>
          <div class="seperator"></div>
          <p class="description">Operation Meraki will be in touch soon with the necessary details.</p>
          <p class="share-call">Have a friend who would enjoy this program too?</p>
          <m-button class="share-cta">
            <div style="padding-inline: 56px">Share</div>
          </m-button>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
    <script>
      const elements = {
        signUpButton: () => document.querySelector('.hero-cta-primary'),
        dialogOverlay: () => document.querySelector('.dialog-overlay'),
        signUpCloseButton: () => document.querySelector('.close'),
        signUpStep1: () => document.querySelector('.sign-up-step-1'),
        signUpStep2: () => document.querySelector('.sign-up-step-2'),
        signedUp: () => document.querySelector('.signed-up'),
        stepIndicator: () => document.querySelector('.step-indicator'),
        signUp1To2: () => document.querySelector('.to-2'),
        signUp2To1: () => document.querySelector('.to-1'),
        signUp2ToSignedUp: () => document.querySelector('.to-signed-up'),
        signUpDialogTitle: () => document.querySelector('.sign-up-title'),
        faq1: () => document.querySelector('.faq-1'),
        faq2: () => document.querySelector('.faq-2'),
        faq3: () => document.querySelector('.faq-3'),
        faq4: () => document.querySelector('.faq-4'),
        faqA1: () => document.querySelector('.faq-a-1'),
        faqA2: () => document.querySelector('.faq-a-2'),
        faqA3: () => document.querySelector('.faq-a-3'),
        faqA4: () => document.querySelector('.faq-a-4'),
      }

      function show(elementGetter) {
        elementGetter().classList.remove('hide')
      }

      function hide(elementGetter) {
        elementGetter().classList.add('hide')
      }

      function text(elementGetter, text) {
        elementGetter().innerHTML = text
      }

      function listen(elementGetter, ev, fn) {
        elementGetter().addEventListener(ev, (e) => {
          e.preventDefault()
          fn(e)
        })
      }

      function transitionToSignUp() {
        show(elements.dialogOverlay)
        show(elements.signUpStep1)
        hide(elements.signUpStep2)
        hide(elements.signedUp)
        show(elements.signUpDialogTitle)
        text(elements.stepIndicator, 'Page 1 of 2')
      }

      function transitionToMain() {
        hide(elements.dialogOverlay)
      }

      function transitionToSignUpStepTwo() {
        hide(elements.signUpStep1)
        show(elements.signUpStep2)
        hide(elements.signedUp)
        show(elements.signUpDialogTitle)
        text(elements.stepIndicator, 'Page 2 of 2')
      }

      function transitionToSignedUp() {
        hide(elements.signUpStep2)
        show(elements.signedUp)
        hide(elements.signUpDialogTitle)
        text(elements.stepIndicator, '')
      }

      function createAnswerToggler(faqElementGetter, answerElementGetter) {
        return function () {
          faqElementGetter().classList.toggle('hide-answer')
          answerElementGetter().classList.toggle('hide')
        }
      }

      function wireUp() {
        listen(elements.signUpButton, 'click', transitionToSignUp)
        listen(elements.signUpCloseButton, 'click', transitionToMain)
        listen(elements.signUp1To2, 'click', () => {
  const errorBox = document.getElementById('page1-error');
  if (validateAllFields()) {
    errorBox.textContent = '';
    transitionToSignUpStepTwo();
  } else {
    errorBox.textContent = 'Please correct all highlighted fields before continuing.';
  }
});        listen(elements.signUp2To1, 'click', transitionToSignUp)
        
        listen(elements.faq1, 'click', createAnswerToggler(elements.faq1, elements.faqA1))
        listen(elements.faq2, 'click', createAnswerToggler(elements.faq2, elements.faqA2))
        listen(elements.faq3, 'click', createAnswerToggler(elements.faq3, elements.faqA3))
        listen(elements.faq4, 'click', createAnswerToggler(elements.faq4, elements.faqA4))
      }

      wireUp()
    </script>


<script>
  function getText(selector) {
    const input = document.querySelector(selector);
    return input ? input.value.trim() : '';
  }

  function getCheckedValueFromRadioGroup(containerSelector) {
    const checkboxes = document.querySelectorAll(`${containerSelector} input[type="checkbox"]`);
    const checked = [...checkboxes].find(el => el.checked);
    return checked ? parseInt(checked.nextElementSibling.textContent.trim()) : null;
  }

  function getCheckedValues(containerSelector) {
    const checkboxes = document.querySelectorAll(`${containerSelector} input[type="checkbox"]`);
    return [...checkboxes].filter(cb => cb.checked).map(cb => cb.nextElementSibling.textContent.trim());
  }

  function getConsent() {
    const checkbox = document.querySelector('.checkbox-item.block input[type="checkbox"]');
    return checkbox ? checkbox.checked : false;
  }

  async function submitResetForm() {
    const data = {
  firstName: getText('input[name="firstName"]'),
  lastName: getText('input[name="lastName"]'),
  state: getText('input[name="state"]'),
  email: getText('input[name="email"]'),
  phone: getText('input[name="phone"]'),
  town: getText('input[name="town"]'),
  hearAboutUs: getText('input[name="hearAboutUs"]'),

      mentalHealthRating: getCheckedValueFromRadioGroup('.radio-group'),
      difficulties:       getCheckedValues('.sign-up-step-2 .checkbox-group'),
      comments:           getText('.sign-up-step-2 textarea'),
      permissionToContact: getConsent()
    };

    try {
      // 🔽 endpoint must match your Express mount:  app.use('/reset', resetRoute)
      const res = await fetch('/api/reengage', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      const result = await res.json();
      if (res.ok) {
        transitionToSignedUp();
      } else {
        alert(result.message || '❌ Submission failed.');
      }
    } catch (err) {
      console.error(err);
      alert('❌ Error submitting form. Try again later.');
    }
  }

  // wire it to the submit button
  document.querySelector('.to-signed-up').addEventListener('click', (e) => {
    e.preventDefault();
    submitResetForm();
  });
</script>

<script>
  const validators = {
    firstName: {
      pattern: /^[A-Za-z]{2,}$/,
      message: 'First name must contain only letters (min 2 characters)'
    },
    lastName: {
      pattern: /^[A-Za-z]{2,}$/,
      message: 'Last name must contain only letters (min 2 characters)'
    },
    state: {
      pattern: /^[A-Za-z\s]{2,}$/,
      message: 'Enter a valid state'
    },
    email: {
      pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
      message: 'Enter a valid email address'
    },
    phone: {
      pattern: /^\d{10}$/,
      message: 'Phone must be 10 digits'
    },
    town: {
      pattern: /^[A-Za-z\s]{2,}$/,
      message: 'Enter a valid town name'
    }
  };

  function validateField(input) {
    const { name, value } = input;
    const validator = validators[name];
    if (!validator) return true;

    const errorId = `${name}-error`;
    let error = document.getElementById(errorId);
    if (!error) {
      error = document.createElement('div');
      error.id = errorId;
      error.style.color = 'red';
      error.style.fontSize = '0.9em';
      input.parentNode.appendChild(error);
    }

    if (!validator.pattern.test(value.trim())) {
      error.textContent = validator.message;
      input.style.borderColor = 'red';
      return false;
    } else {
      error.textContent = '';
      input.style.borderColor = 'green';
      return true;
    }
  }

  function validateAllFields() {
    let allValid = true;
    Object.keys(validators).forEach((fieldName) => {
      const input = document.querySelector(`input[name="${fieldName}"]`);
      if (input && !validateField(input)) {
        allValid = false;
      }
    });
    return allValid;
  }

  // Attach live validation listeners
  Object.keys(validators).forEach((fieldName) => {
    const input = document.querySelector(`input[name="${fieldName}"]`);
    if (input) {
      input.addEventListener('input', () => {
        validateField(input);
      });
    }
  });


</script>

  </body>
</html>

